html, body { margin:0; padding:0; height:100%; }
#map { height:100%; width:100%; }
body { background:#0f0f0f; }

.panel{
  position:absolute;
  z-index:1000;
  width:min(380px, 92vw);
  background:rgba(20,20,20,0.9);
  color:#fff;
  border-radius:12px;
  box-shadow:0 8px 24px rgba(0,0,0,0.25);
  overflow:hidden;
}

.panel-top-left{ top:10px; left:10px; }
.panel-top-right{ top:10px; right:10px; }
.panel-bottom-left{ bottom:10px; left:10px; }

.panel-header{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 12px;
  border-bottom:1px solid rgba(255,255,255,0.12);
}

.panel-body{ padding:12px; font-size:13px; }
.panel.closed .panel-body{ display:none; }

.row{ margin:8px 0; }
.sep{ border:0; border-top:1px solid rgba(255,255,255,0.2); margin:10px 0; }
.muted{ opacity:0.8; font-size:12px; }
.big{ font-size:16px; font-weight:bold; margin-bottom:6px; }

.legend-item{ margin:6px 0; display:flex; align-items:center; gap:8px; }
.dot{ width:10px; height:10px; border-radius:999px; display:inline-block; }
.dot-political{ background:#4ea1ff; }
.dot-military{ background:#ff5a5a; }
.dot-security{ background:#ffd84e; }
.dot-other{ background:#b7b7b7; }

.events-title{ font-weight:700; margin-bottom:6px; }
.events-list{ max-height:260px; overflow:auto; }

.event-dot{
  width:12px; height:12px; border-radius:999px;
  border:2px solid rgba(0,0,0,0.6);
  box-sizing:border-box;
}

.event-row{
  padding:8px;
  border-radius:8px;
  cursor:pointer;
  margin-bottom:6px;
  background:rgba(255,255,255,0.05);
}
.event-row:hover{ background:rgba(255,255,255,0.12); }
.event-row-title{ font-weight:600; }
.event-row-meta{
  font-size:12px;
  opacity:0.85;
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap;
}

.search{
  width:100%;
  padding:8px 10px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.18);
  background:rgba(255,255,255,0.06);
  color:#fff;
  outline:none;
  margin:6px 0 10px;
}
.search::placeholder{ color:rgba(255,255,255,0.6); }

/* blocks */
.stats, .risk, .actors, .pairs, .trend{
  padding:10px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,0.12);
  background:rgba(255,255,255,0.04);
}
.stats-top, .risk-top, .actors-top, .pairs-top, .trend-top{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  margin-bottom:8px;
}
.stats-title, .risk-title, .actors-title, .pairs-title, .trend-title{ font-weight:700; }
.stats-total, .risk-total, .trend-total{ font-size:18px; font-weight:800; }

.stats-grid{
  display:grid;
  grid-template-columns:repeat(4, 1fr);
  gap:8px;
  margin-top:8px;
}
.stats-grid:last-child{ grid-template-columns:repeat(2, 1fr); }

.stat-pill{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:6px 8px;
  border-radius:10px;
  background:rgba(0,0,0,0.18);
  border:1px solid rgba(255,255,255,0.10);
}
.stat-pill span{ opacity:0.8; font-size:11px; }
.stat-pill b{ font-size:13px; }

.risk-list{ display:flex; flex-direction:column; gap:6px; margin-top:8px; }
.risk-row{
  display:flex;
  justify-content:space-between;
  gap:10px;
  padding:6px 8px;
  border-radius:10px;
  background:rgba(0,0,0,0.18);
  border:1px solid rgba(255,255,255,0.10);
}
.risk-row .val{ font-weight:800; }

.actors-right, .pairs-right{ display:flex; align-items:center; gap:8px; }
.btn-mini{
  background:rgba(255,255,255,0.10);
  color:#fff;
  border:1px solid rgba(255,255,255,0.18);
  border-radius:10px;
  padding:4px 8px;
  cursor:pointer;
  font-size:12px;
}
.btn-mini:hover{ background:rgba(255,255,255,0.16); }

.actors-list{ display:flex; flex-wrap:wrap; gap:8px; margin-top:8px; }
.actor-chip{
  display:flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  border-radius:999px;
  background:rgba(0,0,0,0.18);
  border:1px solid rgba(255,255,255,0.10);
  cursor:pointer;
  user-select:none;
}
.actor-chip:hover{ background:rgba(255,255,255,0.12); }
.actor-chip.active{ border-color:rgba(255,255,255,0.35); background:rgba(255,255,255,0.14); }
.actor-chip b{ font-weight:800; }

.pairs-list{ display:flex; flex-direction:column; gap:6px; margin-top:8px; }
.pair-row{
  display:flex;
  justify-content:space-between;
  gap:10px;
  padding:6px 8px;
  border-radius:10px;
  background:rgba(0,0,0,0.18);
  border:1px solid rgba(255,255,255,0.10);
  cursor:pointer;
}
.pair-row:hover{ background:rgba(255,255,255,0.12); }
.pair-row.active{ border-color:rgba(255,255,255,0.35); background:rgba(255,255,255,0.14); }
.pair-row .val{ font-weight:800; }

/* trend canvas */
#trendCanvas{
  width:100%;
  height:120px;
  background:rgba(0,0,0,0.16);
  border:1px solid rgba(255,255,255,0.10);
  border-radius:10px;
}

.badge{
  font-size:11px;
  padding:2px 8px;
  border-radius:999px;
  display:inline-block;
  line-height:1.4;
  letter-spacing:0.2px;
}
.badge-news{ background:rgba(78,161,255,0.22); border:1px solid rgba(78,161,255,0.35); }
.badge-isw{ background:rgba(255,216,78,0.22); border:1px solid rgba(255,216,78,0.35); }

@media (max-width:720px){
  .panel{ position:fixed; left:10px; right:10px; width:auto; }
  .panel-top-left{ top:10px; }
  .panel-top-right{ top:80px; }
  .panel-bottom-left{ bottom:10px; }
}
